var e=localStorage.getItem("selectedTab");(()=>{try{(new function(){const l=this;l.field={prevWindowWidth:null},l.env={isLevelToolTipOpen:!1,isPointToolTipOpen:!1,isSelectBoxOpen:!1,refund_bank:0,refund_holder:$("input[name=refund_holder]"),refund_account:$("input[name=refund_account]")},l.initTabs=()=>{const l=$(".m_tab button, .renewal_m_tab button");-1==lhsCommon.field.payload.orderId?($(".lecture_detail").show(),lhsCommon.comment.env.isRecruit||lhsCommon.comment.env.isSeminar?$(".comment_wrap").show():$(".comment_wrap").hide(),$(".side_menu").hide(),$(".tab_menu").removeClass("selected"),$(".tab_detail").addClass("selected")):($(".tab_menu .tab_challenge .tab_detail .lecture_material .lecture_comment .lecture_review").removeClass("selected"),"tab_menu"==e?($(".lecture_detail").hide(),$(".comment_wrap").hide(),$(".side_menu").show(),$(".challenge_menu").hide(),$(".tab_menu").addClass("selected"),localStorage.setItem("selectedTab","tab_menu"),$(".tab_challenge").removeClass("selected"),$(".tab_detail").removeClass("selected")):"tab_challenge"==e?($(".side_menu").hide(),$(".lecture_detail").hide(),$(".comment_wrap").hide(),$(".challenge_menu").show(),$(".tab_challenge").addClass("selected"),localStorage.setItem("selectedTab","tab_challenge"),$(".tab_menu").removeClass("selected"),$(".tab_detail").removeClass("selected")):($(".side_menu").hide(),$(".lecture_detail").show(),$(".comment_wrap").hide(),$(".challenge_menu").hide(),$(".tab_detail").addClass("selected"),localStorage.setItem("selectedTab","tab_detail"),$(".tab_challenge").removeClass("selected"),$(".tab_menu").removeClass("selected"))),l.on("click",t=>{console.log("mob tabs click");const a=$(t.target);console.log("target:",a),l.removeClass("selected"),a.addClass("selected"),a.hasClass("tab_menu")?($(".lecture_detail").hide(),$(".comment_wrap").hide(),$(".side_menu").show(),$(".challenge_menu").hide(),localStorage.setItem("selectedTab","tab_menu"),e="tab_menu"):a.hasClass("tab_challenge")?($(".side_menu").hide(),$(".lecture_detail").hide(),$(".comment_wrap").hide(),$(".challenge_menu").show(),$("#challenge_slider").slick("refresh"),$("#challenge_info").slick("refresh"),localStorage.setItem("selectedTab","tab_challenge"),e="tab_challenge"):a.hasClass("tab_detail")?($(".side_menu").hide(),$(".lecture_detail").show(),$(".comment_wrap").hide(),$(".challenge_menu").hide(),localStorage.setItem("selectedTab","tab_detail"),e="tab_detail"):a.hasClass("lecture_material")?($(".lecture_detail").show(),$(".challenge_menu").hide(),$(".side_menu").hide(),$(".comment_wrap").hide()):a.hasClass("lecture_comment")?($(".lecture_detail").hide(),$(".challenge_menu").hide(),$(".side_menu").hide(),$(".comment_wrap").show()):a.hasClass("lecture_review")&&($(".lecture_detail").show(),$(".challenge_menu").hide(),$(".side_menu").hide(),$(".comment_wrap").hide())})},l.initTabs2=()=>{const l=$(".pc_tab button");-1==lhsCommon.field.payload.orderId?($(".lecture_detail").show(),lhsCommon.comment.env.isRecruit||lhsCommon.comment.env.isSeminar?$(".comment_wrap").show():$(".comment_wrap").hide(),$(".side_menu").show()):($(".tab_menu .tab_challenge .tab_detail").removeClass("selected"),"tab_menu"==e?($(".side_menu").show(),$(".challenge_menu").hide(),$(".lecture_detail").show(),$(".comment_wrap").hide(),localStorage.setItem("selectedTab","tab_menu"),$(".tab_menu").addClass("selected"),$(".tab_challenge").removeClass("selected")):"tab_challenge"==e?($(".side_menu").hide(),$(".challenge_menu").show(),$(".lecture_detail").show(),$(".comment_wrap").hide(),localStorage.setItem("selectedTab","tab_challenge"),$(".tab_challenge").addClass("selected"),$(".tab_menu").removeClass("selected")):($(".side_menu").show(),$(".challenge_menu").hide(),$(".lecture_detail").show(),$(".comment_wrap").hide(),localStorage.setItem("selectedTab","tab_menu"),$(".tab_menu").addClass("selected"),$(".tab_challenge").removeClass("selected"))),l.on("click",t=>{console.log("pc tab click");const a=$(t.target);l.removeClass("selected"),a.addClass("selected"),a.hasClass("tab_menu")?($(".side_menu").show(),$(".challenge_menu").hide(),localStorage.setItem("selectedTab","tab_menu"),e="tab_menu"):a.hasClass("tab_challenge")&&($(".side_menu").hide(),$(".challenge_menu").show(),$("#challenge_slider").slick("refresh"),$("#challenge_info").slick("refresh"),localStorage.setItem("selectedTab","tab_challenge"),e="tab_challenge")});const t=$(".renewal_tab .item_tab");t.on("click",e=>{console.log("renew tab click");const l=$(e.target);if(console.log("target:",l),t.removeClass("selected"),l.addClass("selected"),l.hasClass("lecture_explain"))$(".lecture_detail").show(),$(".comment_wrap").hide();else if(l.hasClass("lecture_comment"))$(".lecture_detail").hide(),$(".comment_wrap").show();else if(l.hasClass("lecture_review")){$(".lecture_detail").show(),$(".comment_wrap").hide(),lhsCommon.modal.open("reviewModal",this);const e=$("#lhs_header").height();$(".wrap_popup").css("margin-top",e/2),$(window).width()>576&&$("#reviewModal .review_wrap textarea").focus()}else $(".lecture_detail").show(),$(".comment_wrap").hide()})},l.initCheckDownload=()=>{$(".download_btn").on("click",()=>{$.ajax({url:"/classes/checkDownload",type:"POST",dataType:"json",data:{csrf_token:lhsCommon.field.csrf,order_id:lhsCommon.field.payload.orderId,lecture_id:lhsCommon.field.payload.lectureId,download_yn:"Y"}}).done((function(e){console.log(e),lhsCommon.field.payload.downloadYn="Y",$(".download_btn").off("click")})).fail((function(e){console.log(e)}))})},l.initReviewEvent=()=>{$(".pc_event, .m_event").on("click",()=>{lhsCommon.modal.open("eventModal",this);const e=$("#lhs_header").height();$(".wrap_popup").css("margin-top",e/2),$(window).width()>576&&$("#eventModal .review_wrap textarea").focus()}),$(".review_event, .review_btn, .lecture_review").on("click",()=>{lhsCommon.modal.open("reviewModal",this);const e=$("#lhs_header").height();$(".wrap_popup").css("margin-top",e/2),$(window).width()>576&&$("#reviewModal .review_wrap textarea").focus()}),$("#reviewModal .regist_btn").on("click",()=>{const e=$("#reviewModal .regist_btn"),l=$("#reviewModal .review_wrap textarea"),t=l.val();if(console.log("t4est234123"),!t)return alert("수강 후기를 작성해 주세요."),void($(window).width()>576&&l.focus());t.length<50?alert("50자 이상의 수강 후기를 남겨주세요."):(e.prop("disabled",!0),$.ajax({url:"/classes/reviewEvent",type:"POST",dataType:"json",data:{csrf_token:lhsCommon.field.csrf,order_id:lhsCommon.field.payload.orderId,lecture_id:lhsCommon.field.payload.lectureId,content:t}}).done(e=>{e.status?(alert("수강 후기를 작성해 주셔서 감사합니다."),$("#review_counter").html("0 / 50"),$("#reviewModal").hide(),l.val("")):alert(e.description)}).fail(e=>{console.log(e),alert("수강 후기 작성에 실패했습니다.")}).always(()=>{e.prop("disabled",!1)}))})},l.refundValidation=function(){var e=!0;return""==l.env.refund_holder.val()?(alert("예금주명을 입력하세요."),l.env.refund_holder.focus(),e=!1):""==l.env.refund_account.val()?(alert("계좌번호를 입력하세요."),l.env.refund_account.focus(),e=!1):""==l.env.refund_bank?(alert("은행을 선택하세요."),e=!1):(console.log(e),e)},l.initRefundVbank=()=>{$(".refund_vbank_btn").on("click",()=>{l.refundValidation()&&(console.log(l.env),console.log(l.env.refund_account.val()),$.ajax({url:"/classes/applyRefundAjax",type:"POST",dataType:"json",data:{csrf_token:lhsCommon.field.csrf,order_id:lhsCommon.field.payload.orderId,refund_holder:l.env.refund_holder.val(),refund_account:l.env.refund_account.val(),refund_bank:l.env.refund_bank}}).done((function(e){console.log(e),1===e.result?(alert(e.description),location.reload()):alert(e.description)})).fail((function(e){console.log(e),alert("환급 신청을 실패했습니다.")})))})},l.initSelectBoxEvent=()=>{$("#selectButton").on("click",(function(e){l.env.isSelectBoxOpen?$(".option_list").hide():$(".option_list").fadeIn(300),l.env.isSelectBoxOpen=!l.env.isSelectBoxOpen})),$(".option_item").on("click",(function(e){const t=$(e.target).html();l.env.refund_bank=$(e.target).attr("id"),$("#selectClass").html(t),$(".link_wrap").show(),$(".link_wrap").css("display","flex"),$(".option_list").hide(),l.env.isSelectBoxOpen=!l.env.isSelectBoxOpen}))},l.initEvent=()=>{if(lhsCommon.comment.env.isRecruit||lhsCommon.comment.env.isSeminar){let e=!0;eventFormDB.ref("fs_comment/").orderByChild("lecture_id").equalTo(lhsCommon.field.payload.lectureId).limitToLast(1).on("child_added",l=>{const t=l.val();e||($(".comment_list").prepend(lhsCommon.comment.getCommentView(t)),lhsCommon.comment.env.totalCount+=1,$(".comment_wrap .header .recruit_total_count").html(`${lhsCommon.comment.env.totalCount} ${lhsCommon.comment.env.commentTypeText}`)),e=!1})}$(document).ready(()=>{""==lhsCommon.field.payload.currentChallenge&&(console.log("not challenge class"),localStorage.setItem("selectedTab","tab_menu"),e="tab_menu"),l.field.prevWindowWidth=$(window).width(),$(window).width()<992?("object"==typeof e&&(e="tab_detail"),$(".tab_menu .tab_challenge .tab_detail").removeClass("selected"),"tab_menu"==e?$(".tab_menu").addClass("selected"):"tab_challenge"==e?$(".tab_challenge").addClass("selected"):$(".tab_detail").addClass("selected"),l.initTabs()):("object"==typeof e&&(e="tab_menu",console.log("here1")),null===e&&(e="tab_menu",console.log("here2")),$(".tab_menu .tab_challenge .tab_detail").removeClass("selected"),"tab_menu"==e?$(".tab_menu").addClass("selected"):$(".tab_challenge").addClass("selected"),l.initTabs2()),l.initReviewEvent(),l.initCheckDownload(),l.initSelectBoxEvent(),l.initRefundVbank()}),$(window).resize(_.debounce(()=>{const t=$(window).width();console.log("windowWidth:",t),console.log("selected tab:",e),l.field.prevWindowWidth>992&&t<=992?(console.log("pc -> mob"),l.initTabs()):l.field.prevWindowWidth<=992&&t>992&&(console.log("mob -> pc"),l.initTabs2()),l.field.prevWindowWidth=t},500))}}).initEvent()}catch(l){console.log(l)}})(),$(document).ready((function(){$(".lecture_detail .contents").each((function(){$(this).outerHeight(),$(this).outerHeight()>=120&&$(".contents .contents_more").addClass("show")})),$(".contents_more").click((function(){1!=$(this).find(".more_btn").is(":visible")?($(this).find(".more_btn").css({display:"flex"}),$(this).find(".reduce_btn").css({display:"none"}),$(".contents_item").css({"max-height":"120px"}),$(this).removeClass("on")):($(this).find(".more_btn").css({display:"none"}),$(this).find(".reduce_btn").css({display:"flex"}),$(".contents_item").css({"max-height":"inherit"}),$(this).addClass("on"))})),$(".tab_menu .tab_challenge").click((function(){$(".tab_curriculum, .m_tab_lecture_detail").removeClass("selected"),$(".tab_curriculum, .m_tab_lecture_detail").find(".line").fadeOut(300),$(this).addClass("selected"),$(this).find(".line").fadeIn(300),$("#tab_curriculum_item, .m_classes_info").fadeOut(300),$("#tab_challenge_item").fadeIn(300)})),$(".tab_menu .tab_curriculum").click((function(){$(".tab_challenge, .m_tab_lecture_detail").removeClass("selected"),$(".tab_challenge, .m_tab_lecture_detail").find(".line").fadeOut(300),$(this).addClass("selected"),$(this).find(".line").fadeIn(300),$(".m_classes_info, #tab_unchallenge_item").fadeOut(300),$("#tab_curriculum_item").fadeIn(300)})),$(".tab_menu .m_tab_lecture_detail").click((function(){$(".tab_challenge, .tab_curriculum").removeClass("selected"),$(".tab_challenge, .tab_curriculum").find(".line").fadeOut(300),$(this).addClass("selected"),$(this).find(".line").fadeIn(300),$("#tab_curriculum_item, #tab_unchallenge_item").fadeOut(300),$("#tab_challenge_item").fadeOut(300),$(".m_classes_info").fadeIn(300)})),console.log("challenge slider lhsCommon.field.payload.currentChallenge:",lhsCommon.field.payload.currentChallenge),$((function(){$("#challenge_slider").fadeIn(1e3),$("#challenge_slider").slick({slide:"li",infinite:!1,slidesToShow:1,slidesToScroll:1,speed:500,arrows:!0,prevArrow:"<button type='button' class='slick-prev'><img src='/static/front/images/content/img_prev.png' alt='img_prev'></button>",nextArrow:"<button type='button' class='slick-next'><img src='/static/front/images/content/img_next.png' alt='img_next'></button>",dots:!1,autoplay:!1,vertical:!1,draggable:!0,swipe:!0,focusOnSelect:!0,asNavFor:"#challenge_info",variableWidth:!0,initialSlide:Number(lhsCommon.field.payload.currentChallenge)-1}),$("#challenge_info").fadeIn(1e3),$("#challenge_info").slick({slide:"div",infinite:!1,slidesToShow:1,speed:500,fade:!0,arrows:!1,dots:!1,autoplay:!1,vertical:!1,draggable:!0,asNavFor:"#challenge_slider",adaptiveHeight:!0,centerMode:!1,initialSlide:Number(lhsCommon.field.payload.currentChallenge)-1})}));var e=$(".challenge_write textarea");e.focus((function(){$(".challenge_warning").stop().slideDown(500)})),e.blur((function(){$(".challenge_warning").stop().slideUp(500)})),setTimeout((function(){$(".share_speech_bubble").fadeIn(1e3)}),1500),$(".contents_icon_btn .share_btn").on("click",()=>{$("#shareModal").show()}),$("#shareModal .modal_btn_close").on("click",()=>{$("#shareModal").hide()}),$(window).width()<=992?($(".tab_curriculum").removeClass("selected"),$(".m_tab_lecture_detail").addClass("selected")):($(".tab_curriculum").addClass("selected"),$(".m_tab_lecture_detail").removeClass("selected")),$("#number_popup .modal_btn_close").on("click",()=>{$("#number_popup").hide(),$("body").removeClass("fixed"),$("#number_popup").parent(".dim_team").removeClass("popup_on")}),$("#auto_calling_popup .modal_btn_close_num").on("click",()=>{$("#auto_calling_popup").hide()})}));