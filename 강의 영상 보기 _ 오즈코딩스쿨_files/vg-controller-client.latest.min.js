/**
 * Kollus VG Controller Client (03-18-2025)
 * Copyright (c) 2025, Catenoid Incorporated. All rights reserved.
 *
 * @version 1.6.1 (3285)
 * @license ISC
 */


!function(a){"use strict";var b=function(b,c,d){var e=b,f=function(b,c,d,e){var g=b.split("."),h=g.shift();e=e||a.Modules.storage,e[h]=e[h]||{},g.length>0?f(g.join("."),c,d,e[h]):e[h][c]=d()};f(e,c,d)},c=function(b,c){if(void 0===b||void 0===c)throw new Error("Modules.get method must called with module name and namespace param.");for(var d=b.split("."),e=a.Modules.storage,f=0;f<d.length;f++){e=e[d[f]]}return e[c]};a.VgControllerException=function(a,b){this.message=a,this.code=b||-1,this.toString=function(){return this.message+" ["+this.code+"]"}},a.Modules=a.Modules||{},a.Modules.storage=a.Modules.storage||{},a.Modules.add=a.Modules.add||b,a.Modules.get=a.Modules.get||c}(window),function(a){Modules.add("com.kollus.vgcontroller","Config",a)}(function(){"use strict";return{debug_mode:!1,max_initialize_count:10,progress:{percent:0,position:0,duration:0},screen:"windowed",volume:50,muted:!1,jumpstep:10,scalemode:"letterbox",control_visibility:!0,controls_inactive_time:3,controlbar_progress_only:!1,controlbar_hide_playing:!1,video_visibility:!0,speed:1,playback_rates:"[0.5, 1, 1.5, 2]",topmost:!1,video:{brightness:0,contrast:0,saturation:0},subtitle_visibility:!0,subtitle_activity:!0,subtitle_shadow_rect:!1,subtitle_font_size:{default:16,min:12,max:80},subtitle_sub_font_size:{default:12,min:12,max:30},repeat_stat:{status:"cancel",start:0,end:0},permission_request_message:{ko:"동작 및 방향 에 관한 권한이 없어 자이로 기능이 동작하지 않습니다. 설정 > Safari > 고급 > 웹 사이트 데이터 에서 데이터를 삭제 하고 다시 시도하세요.",en:"The gyroscope is not working. Motion sensor access permission is required. Please remove the web site data(Settings > Safari > advanced > Website Data) and try again.",ja:'動作と方向"へのアクセス権限がないためジャイロスコープが動作しません。設定 > Safari > 詳細 > Webサイトデータからデータを削除して再度お試しください',zh:"陀螺仪功能不起作用，的因为没有动作与访问权限。在设置 > safari浏览器 > 高级 > 网站数据 清除数据后请再试。"}}}),function(a){Modules.add("com.kollus.utils","Util",a)}(function(){"use strict";return{isArray:function(a){return!!a&&"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},isString:function(a){return"string"==typeof a},mergeObject:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},hasValueInObject:function(a,b){for(var c in a)if(b===a[c])return!0;return!1},queryString:function(a,b){for(var c,d=[],e=!1,f=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),g=0;g<f.length;g++)c=f[g].split("="),d.push(c[0]),d[c[0]]=c[1],c[0]===a&&(e=!0);return b?e:a?d[a]:d}}}),function(a){Modules.add("com.kollus.utils","Environment",a)}(function(){"use strict";return{isMobileDevice:function(a){var b=["Android","webOS","iPhone","iPod","BlackBerry","IEMobile","Opera Mini"];return void 0!==a&&(b=b.concat(a)),new RegExp(b.join("|"),"i").test(navigator.userAgent)||this.isIosWithMultiTouchPoint()},isIosWithMultiTouchPoint:function(){return!!new RegExp("(Macintosh)","i").test(navigator.userAgent)&&navigator.maxTouchPoints>0},isMobileDeviceWithIPad:function(){return this.isMobileDevice(["iPad"])},isIos:function(){return new RegExp("iPhone|iPad","i").test(navigator.userAgent)||this.isIosWithMultiTouchPoint()},isSupportHTML5Video:function(){try{var a=document.createElement("video");return a.canPlayType('video/mp4; codecs="avc1.42E01E"')||a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')}catch(a){return!1}},isSupportMSE:function(a){try{return MediaSource.isTypeSupported(a),!0}catch(a){return!1}},getChromeVersion:function(){var a=navigator.userAgent.match(/.*Chrome\/([0-9]+)/);return a?parseInt(a[1],10):null},getFirefoxVersion:function(){var a=navigator.userAgent.match(/.*Firefox\/([0-9]+)/);return a?parseInt(a[1],10):null},getLocale:function(){var a=function(){return(navigator.language||navigator.browserLanguage||navigator.userLanguage||"en").toLowerCase()},b=a().substr(0,2);return"ko"!==b&&"en"!==b&&"ja"!==b&&"zh"!==b&&(b="en"),"zh"===b&&"zh-cn"!==a()&&(b="en"),b}}}),function(a){Modules.add("com.kollus.utils","Logger",a)}(function(){"use strict";var a,b,c=Modules.get("com.kollus.vgcontroller","Config"),d=!c||Modules.get("com.kollus.vgcontroller","Config").debug_mode,e=function(c,e,f,g){d&&(window.console||(console={log:function(){}}),f?e="%c["+f+"] %c"+e:a&&(e="%c["+a+"] %c"+e),b?console[c](e,b,"color: inherit"):(e.replace(/\%c/g,""),console[c](e)),g&&alert(e))};return{setPrefix:function(b){a=b},setStyle:function(a){b=a},log:function(a,b,c){e("log",a,b,c)},info:function(a,b,c){e("info",a,b,c)},warn:function(a,b,c){e("warn",a,b,c)},debug:function(a,b,c){e("debug",a,b,c)},error:function(a,b,c){e("error",a,b,c)}}}),function(a){Modules.add("com.kollus.vgcontroller","VgControllerLibrary",a),window.Modules.storage.com.kollus.vgcontroller.idx=window.Modules.storage.com.kollus.vgcontroller.idx||0}(function(){"use strict";var a=Modules.get("com.kollus.utils","Util"),b=Modules.get("com.kollus.utils","Logger"),c=function(b,c){if(void 0===window.postMessage)throw new VgControllerException("this browser does not support postMessage",-99);var d={V2:"v2",V3:"v3",V4:"v4",V5:"v5",FLASH:"flash",VIDEOJS:"videojs",KOLLUS:"kollus"},e={target_window:null,target_origin:"*",includeUserActivation:!1};if(c.hasOwnProperty("player_type")){if(!a.hasValueInObject(d,c.player_type))throw new VgControllerException("player type must be one of v2, v3, v4, v5 and flash.",-99)}else c.player_type=d.KOLLUS;this.player=b,this.version="1.6.1",this.build_version="3285",this.options=a.mergeObject(e,c),this.listeners={},this.buffered_data=[],this.player_type=c.player_type,this.uid=null,c.use_uid_check&&(this.uid=c.player_type+"-postmessage-"+window.Modules.storage.com.kollus.vgcontroller.idx,window.Modules.storage.com.kollus.vgcontroller.idx++)};return c.prototype.initialize=function(a){var b=this;this.is_initialized||(window.addEventListener?window.addEventListener("message",function(a){b.receive(a)},!1):window.attachEvent("onmessage",function(a){b.receive(a)})),this.is_initialized=!0,a(b.uid)},c.prototype.getVersion=function(){return this.version+" ("+this.build_version+")"},c.prototype.getPlayerType=function(){return this.player_type},c.prototype.getUID=function(){return this.uid},c.prototype.on=function(a,b){if("function"!=typeof b)throw new VgControllerException("listener is not callable.",-99);return void 0===this.listeners[a]&&(this.listeners[a]=[]),this.listeners[a].push(b),this},c.prototype.off=function(a){if(void 0!==this.listeners[a]){for(var b=0,c=this.listeners[a].length;b<c;b++)this.listeners[a][b]=null;this.listeners[a]=[]}return this},c.prototype.trigger=function(){if(arguments.length>=1){var a=Array.prototype.slice.call(arguments),b=a.shift();if(void 0!==this.listeners[b])for(var c=0,d=this.listeners[b].length;c<d;c++)this.listeners[b][c].apply(this,a)}},c.prototype.sendBufferedData=function(){var a=this.buffered_data.slice();for(this.buffered_data.length=0;a.length>0;){var b=a.shift();this.send(b[0],b[1],!0)}},c.prototype.pushDataToBuffer=function(a,c){return this.buffered_data.push([a,c]),b.log("[BUFFER PUSH] event_name: "+a+", data: "+JSON.stringify(c)),this.buffered_data},c.prototype.send=function(a,c,d){if(null===this.uid)return this.pushDataToBuffer(a,c);if(!d&&this.buffered_data.length>0)return this.pushDataToBuffer(a,c),this.sendBufferedData();if(null!==this.options.target_window){var e="client"===this.options.controller_type?"c_":"e_",f=d?"[BUFFER SEND]":"[SEND]";b.log(f+" event_name: "+e+a+", data: "+JSON.stringify(c)+", uid: "+this.uid);var g={event_name:e+a,uid:this.uid};return void 0!==c&&(g.data=c),1==this.options.target_window.postMessage.length?this.options.target_window.postMessage(JSON.stringify(g),{includeUserActivation:!0,targetOrigin:this.options.target_origin}):this.options.target_window.postMessage(JSON.stringify(g),this.options.target_origin)}return!1},c.prototype.receive=function(a){if("*"!==this.options.target_origin&&this.options.target_origin!==a.origin)return b.log("[RECEIVE] - event received, but origin not match. (target_origin: "+this.options.target_origin+", event.origin: "+a.origin+")"),!1;var c;try{c=JSON.parse(a.data)}catch(a){}if(void 0===c)return!1;try{var d=c.data;return b.log("[RECEIVE] event_name: "+c.event_name+", data: "+JSON.stringify(d)+", uid: "+this.uid),!0===this.options.use_uid_check&&this.uid!==c.uid?(b.log("- not matched uid. this.uid -> "+this.uid+", message.uid -> "+c.uid),!1):(!1===this.options.use_uid_check&&null===this.uid&&(b.log("- no use_uid_check. message.uid will be set to this.uid. mesasge.uid -> "+c.uid),this.uid=c.uid),this.options.is_child&&null===this.options.target_window&&(b.log("- this window is child. target_window will be set as event.source."),this.options.target_window=window.parent),this.trigger(c.event_name,d,a))}catch(a){throw new VgControllerException(a.message,-1)}},c.prototype.getEventListeners=function(){return this.listeners},c.prototype.removeAllEventListeners=function(){this.listeners={}},c}),function(a){Modules.add("com.kollus.vgcontroller","CacheStorage",a)}(function(){"use strict";var a=Modules.get("com.kollus.vgcontroller","Config"),b=function(){this.cache_data={};try{window.localStorage.setItem("checkLocalStorage","available"),window.localStorage.removeItem("checkLocalStorage"),this.local_Storage={getItem:function(a){return window.localStorage.getItem(a)},setItem:function(a,b){return window.localStorage.setItem(a,b),!0},removeItem:function(a){return window.localStorage.removeItem(a),!0}}}catch(a){this.local_Storage={getItem:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(a,b){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var c="";switch((1/0).constructor){case Number:c="; expires=Fri, 31 Dec 9999 23:59:59 GMT";break;case String:c="; expires="+1/0;break;case Date:c="; expires="+(1/0).toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+c+'; path="/"',!0},removeItem:function(a){return!!this.hasItem(a)&&(document.cookie=encodeURIComponent(a)+'=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path="/"',!0)},hasItem:function(a){return a?new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):null}}}};return b.prototype.get_local_storage_item=function(a){return this.local_Storage.getItem(a)},b.prototype.set_local_storage_item=function(a,b){return this.local_Storage.setItem(a,b)},b.prototype.remove_local_storage_item=function(a){return this.local_Storage.removeItem(a)},b.prototype.set_main_media_subtitles=function(a){this.cache_data.main_media_subtitles=a},b.prototype.get_main_media_subtitles=function(){return this.cache_data.main_media_subtitles},b.prototype.set_main_media_subtitles_sub=function(a){this.cache_data.main_media_subtitles_sub=a},b.prototype.get_main_media_subtitles_sub=function(){return this.cache_data.main_media_subtitles_sub},b.prototype.set_progress=function(a){this.cache_data.progress=a},b.prototype.get_progress=function(){return void 0!==this.cache_data.progress?this.cache_data.progress:a.progress},b.prototype.set_screen=function(a){this.cache_data.screen=a},b.prototype.get_screen=function(){return void 0!==this.cache_data.screen?this.cache_data.screen:a.screen},b.prototype.set_volume=function(a){this.cache_data.volume=a},b.prototype.get_volume=function(){return void 0!==this.cache_data.volume?this.cache_data.volume:a.volume},b.prototype.set_muted=function(a){this.cache_data.muted=a},b.prototype.get_muted=function(){return void 0!==this.cache_data.muted?this.cache_data.muted:a.muted},b.prototype.set_jumpstep=function(a){this.cache_data.jumpstep=a},b.prototype.get_jumpstep=function(){return void 0!==this.cache_data.jumpstep?this.cache_data.jumpstep:a.jumpstep},b.prototype.set_scalemode=function(a){this.cache_data.scalemode=a},b.prototype.get_scalemode=function(){return void 0!==this.cache_data.scalemode?this.cache_data.scalemode:a.scalemode},b.prototype.set_control_visibility=function(a){this.cache_data.control_visibility=a},b.prototype.get_control_visibility=function(){return void 0!==this.cache_data.control_visibility?this.cache_data.control_visibility:a.control_visibility},b.prototype.set_video_visibility=function(a){this.cache_data.video_visibility=a},b.prototype.get_video_visibility=function(){return void 0!==this.cache_data.video_visibility?this.cache_data.video_visibility:a.video_visibility},b.prototype.set_speed=function(a){this.cache_data.speed=a},b.prototype.get_speed=function(){return void 0!==this.cache_data.speed?this.cache_data.speed:a.speed},b.prototype.set_playback_rates=function(a){this.cache_data.playback_rates=a},b.prototype.get_playback_rates=function(){return void 0!==this.cache_data.playback_rates?this.cache_data.playback_rates:a.playback_rates},b.prototype.set_topmost=function(a){this.cache_data.topmost=a},b.prototype.get_topmost=function(){return void 0!==this.cache_data.topmost?this.cache_data.topmost:a.topmost},b.prototype.set_video=function(a){this.cache_data.video=a},b.prototype.get_video=function(){return void 0!==this.cache_data.video?this.cache_data.video:a.video},b.prototype.set_subtitle_visibility=function(a){this.cache_data.subtitle_visibility=a},b.prototype.get_subtitle_visibility=function(){return void 0!==this.cache_data.subtitle_visibility?this.cache_data.subtitle_visibility:a.subtitle_visibility},b.prototype.set_subtitle_sub_visibility=function(a){this.cache_data.subtitle_sub_visibility=a},b.prototype.get_subtitle_sub_visibility=function(){return void 0!==this.cache_data.subtitle_sub_visibility?this.cache_data.subtitle_sub_visibility:a.subtitle_sub_visibility},b.prototype.set_subtitle_activity=function(a){this.cache_data.subtitle_activity=a},b.prototype.get_subtitle_activity=function(){return void 0!==this.cache_data.subtitle_activity?this.cache_data.subtitle_activity:a.subtitle_activity},b.prototype.set_subtitle_sub_activity=function(a){this.cache_data.subtitle_sub_activity=a},b.prototype.get_subtitle_sub_activity=function(){return void 0!==this.cache_data.subtitle_sub_activity?this.cache_data.subtitle_sub_activity:a.subtitle_sub_activity},b.prototype.set_player_id=function(a){this.cache_data.player_id=a},b.prototype.get_player_id=function(){return this.cache_data.player_id||null},b.prototype.set_player_type=function(a){this.cache_data.player_type=a},b.prototype.get_player_type=function(){return this.cache_data.player_type||null},b.prototype.set_hardware_id=function(a){this.cache_data.hardware_id=a},b.prototype.get_hardware_id=function(){return this.cache_data.hardware_id||null},b.prototype.set_video_info=function(a){this.cache_data.video_info=a},b.prototype.get_video_info=function(){return this.cache_data.video_info||null},b.prototype.set_enable_close_event=function(a){this.cache_data.enable_close_event=a},b.prototype.get_enable_close_event=function(){return this.cache_data.enable_close_event||!1},b.prototype.set_close_callback_fn=function(a){this.cache_data.close_callback_fn="("+a.toString()+")()"},b.prototype.get_close_callback_fn=function(){return this.cache_data.close_callback_fn||null},b.prototype.set_close_button_callback_fn=function(a){this.cache_data.close_button_callback_fn="("+a.toString()+")()"},b.prototype.get_close_button_callback_fn=function(){return this.cache_data.close_button_callback_fn||null},b.prototype.set_lms_data_callback_fn=function(a){this.cache_data.get_lms_data_fn=a},b.prototype.get_lms_data_callback_fn=function(){return this.cache_data.get_lms_data_fn||null},b.prototype.set_bookmark_count_callback_fn=function(a){this.cache_data.get_bookmark_count_fn=a},b.prototype.get_bookmark_count_callback_fn=function(){return this.cache_data.get_bookmark_count_fn||null},b.prototype.set_hls_frag_data=function(a){this.cache_data.hls_frag_data=a},b.prototype.get_hls_frag_data=function(){return this.cache_data.hls_frag_data||null},b.prototype.set_bitrate_data=function(a){this.cache_data.bitrate_data=a},b.prototype.get_bitrate_data=function(){return this.cache_data.bitrate_data||null},b.prototype.set_controls_inactive_time=function(a){this.cache_data.controls_inactive_time=a},b.prototype.get_controls_inactive_time=function(){return void 0!==this.cache_data.controls_inactive_time?this.cache_data.controls_inactive_time:a.controls_inactive_time},b.prototype.set_subtitle_shadow_rect=function(a){this.cache_data.subtitle_shadow_rect=a},b.prototype.get_subtitle_shadow_rect=function(){return void 0!==this.cache_data.subtitle_shadow_rect?this.cache_data.subtitle_shadow_rect:a.subtitle_shadow_rect},b.prototype.set_subtitle_sub_shadow_rect=function(a){this.cache_data.subtitle_sub_shadow_rect=a},b.prototype.get_subtitle_sub_shadow_rect=function(){return void 0!==this.cache_data.subtitle_sub_shadow_rect?this.cache_data.subtitle_sub_shadow_rect:a.subtitle_shadow_rect},b.prototype.set_controlbar_progress_only=function(a){this.cache_data.controlbar_progress_only=a},b.prototype.get_controlbar_progress_only=function(){return void 0!==this.cache_data.controlbar_progress_only?this.cache_data.controlbar_progress_only:a.controlbar_progress_only},b.prototype.set_controlbar_hide_playing=function(a){this.cache_data.controlbar_hide_playing=a},b.prototype.get_controlbar_hide_playing=function(){return void 0!==this.cache_data.controlbar_hide_playing?this.cache_data.controlbar_hide_playing:a.controlbar_hide_playing},b.prototype.set_repeat_stat=function(b){if("number"==typeof b.status){var c=["cancel","start","end"];b.status=c[b.status]}a.repeat_stat=b},b.prototype.get_repeat_stat=function(){return a.repeat_stat},b.prototype.set_error_detail=function(a,b,c){this.cache_data.error_detail={code:a,message:b,param:c}},b.prototype.get_error_detail=function(){return void 0!==this.cache_data.error_detail?this.cache_data.error_detail:null},b.prototype.set_device_orientation=function(a){this.cache_data.device_orientation=a},b.prototype.get_device_orientation=function(){return this.cache_data.device_orientation},b.prototype.set_custom_error=function(a,b,c){var d={code:a,message:b,param:c};if(this.cache_data.custom_error)for(var e=0;e<this.cache_data.custom_error.length;e++){var f=this.cache_data.custom_error[e];if(a===f.code)return this.cache_data.custom_error.message=b,this.cache_data.custom_error.param=c,f}else this.cache_data.custom_error=[];return this.cache_data.custom_error.push(d),d},b.prototype.get_custom_error=function(){return this.cache_data.custom_error||[]},b.prototype.set_subtitle_font_size=function(a){this.cache_data.subtitle_font_size=a},b.prototype.get_subtitle_font_size=function(){return void 0!==this.cache_data.subtitle_font_size?this.cache_data.subtitle_font_size:a.subtitle_font_size.default},b.prototype.set_subtitle_sub_font_size=function(a){this.cache_data.subtitle_sub_font_size=a},b.prototype.get_subtitle_sub_font_size=function(){return void 0!==this.cache_data.subtitle_sub_font_size?this.cache_data.subtitle_sub_font_size:a.subtitle_sub_font_size.default},b.prototype.set_chat_connect_address=function(a){this.cache_data.chat_connect_address=a},b.prototype.get_chat_connect_address=function(){return this.cache_data.chat_connect_address||null},b.prototype.set_chat_initconfig=function(a){this.cache_data.chat_initconfig=a},b.prototype.get_chat_initconfig=function(){return this.cache_data.chat_initconfig||null},b.prototype.set_fullscreen_element=function(a){this.cache_data.fullscreen_element=a},b.prototype.get_fullscreen_element=function(){return this.cache_data.fullscreen_element||null},b.prototype.set_custom_skin=function(a,b){b?(this.cache_data.custom_skin_object=this.cache_data.custom_skin_object||{},this.cache_data.custom_skin_object[b]=a):this.cache_data.custom_skin=a},b.prototype.get_custom_skin=function(a){return a?(this.cache_data.custom_skin_object=this.cache_data.custom_skin_object||{},this.cache_data.custom_skin_object[a]||{}):this.cache_data.custom_skin||{}},b.prototype.set_next_episode_auto=function(a){this.cache_data.next_episode_auto=a},b.prototype.get_next_episode_auto=function(){return this.cache_data.next_episode_auto},b}),function(a){Modules.add("com.kollus.vgcontroller","VgControllerClient",a)}(function(){"use strict";var Config=Modules.get("com.kollus.vgcontroller","Config"),Logger=Modules.get("com.kollus.utils","Logger"),Util=Modules.get("com.kollus.utils","Util"),Environment=Modules.get("com.kollus.utils","Environment"),CacheStorage=Modules.get("com.kollus.vgcontroller","CacheStorage"),VgControllerLibrary=Modules.get("com.kollus.vgcontroller","VgControllerLibrary"),VgControllerClient=function(a){var b={controller_type:"client",use_uid_check:!0,is_child:!1},c=this;this.cacheStorage=new CacheStorage,this.vgControllerLibrary=new VgControllerLibrary(null,Util.mergeObject(b,a)),this.vgControllerLibrary.initialize(function(a){function b(a){a.data&&"check_vg_controller_client_ready"===a.data.event_name?c.vgControllerLibrary.options.target_window.postMessage({event_name:"vg_controller_client_connect_status",status:f},"*"):a.data&&"vg_controller_try_connect"===a.data.event_name&&!d?(e=0,g()):a.data&&"kollus_chatting"===a.data.event_name&&("start_height_monitor"===a.data.command?c.monitorHeight(a.origin,a.data.interval,a.data.maxcount):"stop_height_monitor"===a.data.command&&c.clearInterval(c.heightTimer))}Logger.setPrefix("Client"),Logger.setStyle("color: blue; font-weight:bold;"),Logger.log("Connect to server... UID : "+a);var d=!1,e=0,f="ready";c.vgControllerLibrary.on("e_initialized",function(a){d=!0,c.cacheStorage.set_player_type(a)}),window.addEventListener("message",b,!1);var g=function(){var a=setInterval(function(){d?(clearInterval(a),c.vgControllerLibrary.trigger("initialized"),Logger.log("Initialize success."),f="initialized"):++e>=Config.max_initialize_count?(clearInterval(a),Logger.log("Initialize failed. max initialize try reached."),f="ready"):(Logger.log("Send initialize command. try "+e+" time..."),c.vgControllerLibrary.send("initialize",c.vgControllerLibrary.getVersion()),f="initializing")},1e3)};g()});var d=this.serverEventListeners();for(var e in d)this.vgControllerLibrary.on("e_"+e,d[e])};return VgControllerClient.prototype.getVersion=function(){return this.vgControllerLibrary.getVersion()},VgControllerClient.prototype.getUID=function(){return this.vgControllerLibrary.getUID()},VgControllerClient.prototype.on=function(a,b){return this.vgControllerLibrary.on(a,b)},VgControllerClient.prototype.off=function(a){return this.vgControllerLibrary.off(a)},VgControllerClient.prototype.get_player_id=function(){return this.cacheStorage.get_player_id()},VgControllerClient.prototype.get_player_type=function(){return this.cacheStorage.get_player_type()},VgControllerClient.prototype.get_hardware_id=function(){return this.cacheStorage.get_hardware_id()},VgControllerClient.prototype.get_progress=function(){return this.cacheStorage.get_progress()},VgControllerClient.prototype.play=function(a){this.vgControllerLibrary.send("play",void 0!==a?parseInt(a):null)},VgControllerClient.prototype.pause=function(){this.vgControllerLibrary.send("pause")},VgControllerClient.prototype.mute=function(){this.vgControllerLibrary.send("mute")},VgControllerClient.prototype.ff=function(){this.vgControllerLibrary.send("ff")},VgControllerClient.prototype.rw=function(){this.vgControllerLibrary.send("rw")},VgControllerClient.prototype.set_current_time=function(a){this.vgControllerLibrary.send("set_current_time",parseInt(a))},VgControllerClient.prototype.get_current_time=function(){return this.cacheStorage.get_progress().position},VgControllerClient.prototype.set_volume=function(a){this.vgControllerLibrary.send("set_volume",Math.min(100,Math.max(0,a)))},VgControllerClient.prototype.get_volume=function(){return this.cacheStorage.get_volume()},VgControllerClient.prototype.set_screen=function(){var a=this.cacheStorage.get_fullscreen_element();a?this.setCustomElementFullscreen(a):this.vgControllerLibrary.send("set_screen")},VgControllerClient.prototype.get_screen=function(){return this.cacheStorage.get_screen()},VgControllerClient.prototype.set_jumpstep=function(a){this.vgControllerLibrary.send("set_jumpstep",a),this.cacheStorage.set_jumpstep(1*a)},VgControllerClient.prototype.get_jumpstep=function(){return this.cacheStorage.get_jumpstep()},VgControllerClient.prototype.set_speed=function(a){this.vgControllerLibrary.send("set_speed",parseFloat(Math.min(4,Math.max(.5,a))).toFixed(1))},VgControllerClient.prototype.get_speed=function(){return this.cacheStorage.get_speed()},VgControllerClient.prototype.toggle_pip=function(){this.vgControllerLibrary.send("toggle_pip")},VgControllerClient.prototype.set_control_visibility=function(a){this.vgControllerLibrary.send("set_control_visibility",a),this.cacheStorage.set_control_visibility(a)},VgControllerClient.prototype.get_control_visibility=function(){return!0===this.cacheStorage.get_control_visibility()},VgControllerClient.prototype.set_video_visibility=function(a){this.vgControllerLibrary.send("set_video_visibility",a),this.cacheStorage.set_video_visibility(a)},VgControllerClient.prototype.get_video_visibility=function(){return!0===this.cacheStorage.get_video_visibility()},VgControllerClient.prototype.get_video_info=function(){return this.cacheStorage.get_video_info()},VgControllerClient.prototype.set_ratio=function(a){this.vgControllerLibrary.send("set_ratio",a)},VgControllerClient.prototype.set_scalemode=function(a){"|letterbox|stretch|zoom|none|".indexOf(a)>=0&&this.vgControllerLibrary.send("set_scalemode",a)},VgControllerClient.prototype.get_scalemode=function(){return this.cacheStorage.get_scalemode()},VgControllerClient.prototype.set_topmost=function(a){this.vgControllerLibrary.send("set_topmost",a?1:0)},VgControllerClient.prototype.get_topmost=function(){return this.cacheStorage.get_topmost()},VgControllerClient.prototype.set_brightness=function(a){this.vgControllerLibrary.send("set_brightness",Math.min(50,Math.max(-50,a)))},VgControllerClient.prototype.get_brightness=function(){return this.cacheStorage.get_video().brightness},VgControllerClient.prototype.set_contrast=function(a){this.vgControllerLibrary.send("set_contrast",Math.min(50,Math.max(-50,a)))},VgControllerClient.prototype.get_contrast=function(){return this.cacheStorage.get_video().contrast},VgControllerClient.prototype.set_saturation=function(a){this.vgControllerLibrary.send("set_saturation",Math.min(50,Math.max(-50,a)))},VgControllerClient.prototype.get_saturation=function(){return this.cacheStorage.get_video().saturation},VgControllerClient.prototype.set_repeat_start=function(a){this.vgControllerLibrary.send("set_sectiontime",{type:1,value:a||-1})},VgControllerClient.prototype.set_repeat_end=function(a){this.vgControllerLibrary.send("set_sectiontime",{type:2,value:a||-1})},VgControllerClient.prototype.unset_repeat=function(){this.vgControllerLibrary.send("set_sectiontime",{type:0,value:-1})},VgControllerClient.prototype.get_repeat=function(){return this.cacheStorage.get_repeat_stat()},VgControllerClient.prototype.refresh_bookmark=function(){this.vgControllerLibrary.send("refresh_bookmark")},VgControllerClient.prototype.enable_fullscreen_button=function(){this.vgControllerLibrary.send("enable_fullscreen_button")},VgControllerClient.prototype.set_playback_rates=function(a){this.vgControllerLibrary.send("set_playback_rates",a)},VgControllerClient.prototype.get_playback_rates=function(){return JSON.parse(this.cacheStorage.get_playback_rates())},VgControllerClient.prototype.set_lms_check=function(){this.vgControllerLibrary.send("set_lms_check")},VgControllerClient.prototype.set_keyframe_seek_default=function(a){this.vgControllerLibrary.send("set_keyframe_seek_default",a)},VgControllerClient.prototype.set_short_key=function(a){this.vgControllerLibrary.send("set_short_key",a)},VgControllerClient.prototype.set_enable_close_event=function(a){this.cacheStorage.set_enable_close_event(a),this.vgControllerLibrary.send("set_enable_close_event",a)},VgControllerClient.prototype.get_enable_close_event=function(){return this.cacheStorage.get_enable_close_event()},VgControllerClient.prototype.set_close_callback_fn=function(a){this.cacheStorage.set_close_callback_fn(a),this.vgControllerLibrary.send("set_close_callback_fn",encodeURI(a.toString()))},VgControllerClient.prototype.get_lms_data=function(a){this.cacheStorage.set_lms_data_callback_fn(a),this.vgControllerLibrary.send("get_lms_data")},VgControllerClient.prototype.get_bookmark_count=function(a){this.cacheStorage.set_bookmark_count_callback_fn(a),this.vgControllerLibrary.send("get_bookmark_count")},VgControllerClient.prototype.get_hls_frag_data=function(){return JSON.parse(this.cacheStorage.get_hls_frag_data())},VgControllerClient.prototype.get_bitrate_data=function(){return JSON.parse(this.cacheStorage.get_bitrate_data())},VgControllerClient.prototype.set_bitrate=function(a){this.vgControllerLibrary.send("set_bitrate",a)},VgControllerClient.prototype.set_controls_inactive_time=function(a){this.cacheStorage.set_controls_inactive_time(a),this.vgControllerLibrary.send("set_controls_inactive_time",a)},VgControllerClient.prototype.get_controls_inactive_time=function(){return this.cacheStorage.get_controls_inactive_time()},VgControllerClient.prototype.set_controls_activity=function(a){this.vgControllerLibrary.send("set_controls_activity",a)},VgControllerClient.prototype.get_controls_activity=function(){return this.cacheStorage.get_controls_activity()},VgControllerClient.prototype.set_controlbar_progress_only=function(a){this.vgControllerLibrary.send("set_controlbar_progress_only",a),this.cacheStorage.set_controlbar_progress_only(a)},VgControllerClient.prototype.get_controlbar_progress_only=function(){return this.cacheStorage.get_controlbar_progress_only()},VgControllerClient.prototype.set_controlbar_hide_playing=function(a){this.vgControllerLibrary.send("set_controlbar_hide_playing",a),this.cacheStorage.set_controlbar_hide_playing(a)},VgControllerClient.prototype.get_controlbar_hide_playing=function(){this.cacheStorage.get_controlbar_hide_playing()},VgControllerClient.prototype.set_subtitle_visibility=function(a){this.vgControllerLibrary.send("set_subtitle_visibility",a)},VgControllerClient.prototype.set_subtitle_sub_visibility=function(a){this.vgControllerLibrary.send("set_subtitle_sub_visibility",a)},VgControllerClient.prototype.set_subtitle_font_size=function(a){a<Config.subtitle_font_size.min?a=Config.subtitle_font_size.min:a>Config.subtitle_font_size.max&&(a=Config.subtitle_font_size.max),this.vgControllerLibrary.send("set_subtitle_font_size",parseInt(a))},VgControllerClient.prototype.get_subtitle_font_size=function(){return this.cacheStorage.get_subtitle_font_size()},VgControllerClient.prototype.set_subtitle_sub_font_size=function(a){a<Config.subtitle_sub_font_size.min?a=Config.subtitle_sub_font_size.min:a>Config.subtitle_sub_font_size.max&&(a=Config.subtitle_sub_font_size.max),this.vgControllerLibrary.send("set_subtitle_sub_font_size",parseInt(a))},VgControllerClient.prototype.get_subtitle_sub_font_size=function(){return this.cacheStorage.get_subtitle_sub_font_size()},VgControllerClient.prototype.set_subtitle_shadow_rect=function(a){this.vgControllerLibrary.send("set_subtitle_shadow_rect",a),this.cacheStorage.set_subtitle_shadow_rect(a)},VgControllerClient.prototype.get_subtitle_shadow_rect=function(){return this.cacheStorage.get_subtitle_shadow_rect()},VgControllerClient.prototype.set_subtitle_sub_shadow_rect=function(a){this.vgControllerLibrary.send("set_subtitle_sub_shadow_rect",a),this.cacheStorage.set_subtitle_sub_shadow_rect(a)},VgControllerClient.prototype.get_subtitle_sub_shadow_rect=function(){return this.cacheStorage.get_subtitle_sub_shadow_rect()},VgControllerClient.prototype.set_subtitle_activity=function(a){this.vgControllerLibrary.send("set_subtitle_activity",a),this.cacheStorage.set_subtitle_activity(a)},VgControllerClient.prototype.get_subtitle_activity=function(){return this.cacheStorage.get_subtitle_activity()},
VgControllerClient.prototype.set_subtitle=function(a,b,c,d){this.vgControllerLibrary.send("set_subtitle",{value:a,text_track_type:b,label:c,language:d})},VgControllerClient.prototype.set_current_subtitle=function(a){var b=this.cacheStorage.get_main_media_subtitles();void 0!==b&&((b.length-1<a||a<0)&&(a=0),this.vgControllerLibrary.send("set_current_subtitle",a))},VgControllerClient.prototype.set_current_subtitle_sub=function(a){var b=this.cacheStorage.get_main_media_subtitles_sub();void 0!==b&&((b.length-1<a||a<0)&&(a=0),this.vgControllerLibrary.send("set_current_subtitle_sub",a))},VgControllerClient.prototype.get_subtitles_list=function(){var a=this.cacheStorage.get_main_media_subtitles(),b=[];if(!a||a.length<1)return null;for(var c in a)b.push({subtitle_name:a[c].subtitle_name,subtitle_language_code:a[c].subtitle_language_code,default:a[c].default});return b},VgControllerClient.prototype.get_subtitles_sub_list=function(){var a=this.cacheStorage.get_main_media_subtitles_sub(),b=[];if(!a||a.length<1)return null;for(var c in a)b.push({subtitle_name:a[c].subtitle_name,subtitle_language_code:a[c].subtitle_language_code,default:a[c].default});return b},VgControllerClient.prototype.get_error_detail=function(){return this.cacheStorage.get_error_detail()},VgControllerClient.prototype.dispose=function(){this.vgControllerLibrary.send("dispose")},VgControllerClient.prototype.set_vr_overlay=function(a){this.setVROverlay(a)},VgControllerClient.prototype.set_custom_error=function(a,b,c){this.vgControllerLibrary.send("set_custom_error",{code:parseInt(a),message:b,param:c}),this.cacheStorage.set_custom_error(parseInt(a),b,c)},VgControllerClient.prototype.get_custom_error=function(){return this.cacheStorage.get_custom_error()},VgControllerClient.prototype.get_chat_connect_address=function(){return this.cacheStorage.get_chat_connect_address()},VgControllerClient.prototype.set_close_button=function(a,b){a&&this.cacheStorage.set_close_button_callback_fn(b),this.vgControllerLibrary.send("set_close_button",a)},VgControllerClient.prototype.set_point_color=function(a){this.vgControllerLibrary.send("set_point_color",a)},VgControllerClient.prototype.notify_visibleheight_changed=function(a){this.vgControllerLibrary.send("notify_visibleheight_changed",a)},VgControllerClient.prototype.hide_controlbar_button=function(a){this.vgControllerLibrary.send("hide_controlbar_button",a)},VgControllerClient.prototype.set_chat_config=function(a){this.vgControllerLibrary.send("set_chat_config",a)},VgControllerClient.prototype.get_chat_initconfig=function(){return this.cacheStorage.get_chat_initconfig()},VgControllerClient.prototype.get_custom_skin=function(a){if(a){var b=1*a.split("v")[1];if(2===b)return this.cacheStorage.get_custom_skin();if(b>2)return this.cacheStorage.get_custom_skin(a);throw new VgControllerException("not supported custom skin type.",-99)}return this.cacheStorage.get_custom_skin()},VgControllerClient.prototype.set_custom_skin=function(a){this.vgControllerLibrary.send("set_custom_skin",a)},VgControllerClient.prototype.set_fullscreen_element=function(a){var b=this.cacheStorage,c=this.vgControllerLibrary;if(b.get_fullscreen_element())return!1;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){b.set_fullscreen_element(a),c.send("enable_fullscreen_button"),c.send("set_fullscreen_element");var d=function(a){var d=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement||document.msFullscreenElement,e=d?"fullscreen":"windowed";b.set_screen(e),c.trigger("screenchange",e),c.send("set_fullscreen_state","fullscreen"===e)};return document.addEventListener("webkitfullscreenchange",d),document.addEventListener("mozfullscreenchange",d),document.addEventListener("fullscreenchange",d),document.addEventListener("MSFullscreenChange",d),!0}return console.error("Your browser is not supported Fullscreen API."),!1},VgControllerClient.prototype.setCustomElementFullscreen=function(a){if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else console.warn("Your browser is not supported Fullscreen API.")},VgControllerClient.prototype.get_next_episode_auto=function(){return this.cacheStorage.get_next_episode_auto()},VgControllerClient.prototype.set_next_episode_auto=function(a){this.cacheStorage.set_next_episode_auto(a),this.vgControllerLibrary.send("set_next_episode_auto",a)},VgControllerClient.prototype.setVROverlay=function(a){var b=this;if(!Environment.isMobileDeviceWithIPad())return!1;if(!window.DeviceMotionEvent||"function"!=typeof window.DeviceMotionEvent.requestPermission)return!1;if(this.cacheStorage.get_local_storage_item("device_motion_permission"))return!1;var c={permission_request_help_message:Config.permission_request_message[Environment.getLocale()],target_element:null},d=Util.mergeObject(c,a);if(d.target_element){var e=document.createElement("div");e.className="vr-overlay",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex="1",e.addEventListener("touchend",function(a){b.checkDeviceMotionPermission(d)}),d.target_element.insertBefore(e,d.target_element.firstChild)}},VgControllerClient.prototype.checkDeviceMotionPermission=function(a){var b=this;document.querySelectorAll(".vr-overlay").forEach(function(c){c.removeEventListener("touchend",function(){b.checkDeviceMotionPermission(a)}),a.target_element.removeChild(c)});try{DeviceMotionEvent.requestPermission().then(function(c){"denied"===c?alert(a.permission_request_help_message):"granted"===c&&b.cacheStorage.set_local_storage_item("device_motion_permission",!0)}).catch(function(a){console.error(a)})}catch(a){console.error("DeviceMotionEvent is not defined")}finally{b.vgControllerLibrary.send("play")}},VgControllerClient.prototype.checkDeviceOrientation=function(){var a=this;this.checkDeviceTimer=setInterval(function(){var b;window.matchMedia("(orientation: portrait)").matches?b="portrait":window.matchMedia("(orientation: landscape)").matches&&(b="landscape"),a.cacheStorage.get_device_orientation()!==b&&(a.cacheStorage.set_device_orientation(b),a.vgControllerLibrary.send("set_device_orientation",b),a.vgControllerLibrary.trigger("device_orientation_changed",b))},1e3)},VgControllerClient.prototype.checkDeviceMotion=function(){var a=this;window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(b){a.vgControllerLibrary.send("set_device_motion",JSON.stringify({rotationRate:b.rotationRate}))})},VgControllerClient.prototype.callIntentURI=function(a){window.location.href=a},VgControllerClient.prototype.monitorHeight=function(a,b,c){var d,e=0;this.heightTimer=setInterval(function(){e++>=c?clearInterval(this.heightTimer):window.innerHeight!==d&&(target_window.postMessage({event_name:"kollus_chatting",command:"notify_height",height:window.innerHeight},a),d=window.innerHeight)},b)},VgControllerClient.prototype.set_bookmark_add_visivility=function(a){this.vgControllerLibrary.send("set_bookmark_add_visivility",a)},VgControllerClient.prototype.set_bookmark_update_visivility=function(a){this.vgControllerLibrary.send("set_bookmark_update_visivility",a)},VgControllerClient.prototype.set_bookmark_add_activation=function(a){this.vgControllerLibrary.send("set_bookmark_add_activation",a)},VgControllerClient.prototype.set_bookmark_update_activation=function(a){this.vgControllerLibrary.send("set_bookmark_update_activation",a)},VgControllerClient.prototype.set_bookmark_add_activity=function(a){this.vgControllerLibrary.send("set_bookmark_add_activity",a)},VgControllerClient.prototype.set_bookmark_update_activity=function(a){this.vgControllerLibrary.send("set_bookmark_update_activity",a)},VgControllerClient.prototype.set_setting_panel_activity=function(a){this.vgControllerLibrary.send("set_setting_panel_activity",a)},VgControllerClient.prototype.dispose=function(){console.warn("VG-Controller is disconnected!"),clearInterval(this.checkDeviceTimer),this.vgControllerLibrary.removeAllEventListeners(),window.removeEventListener("devicemotion",function(a){})},VgControllerClient.prototype.serverEventListeners=function(){var _this=this;return{open:function(){_this.vgControllerLibrary.trigger("open")},ready:function(){_this.vgControllerLibrary.trigger("ready")},loaded:function(){_this.vgControllerLibrary.trigger("loaded")},play:function(){_this.vgControllerLibrary.trigger("play")},pause:function(){_this.vgControllerLibrary.trigger("pause")},seek_start:function(){_this.vgControllerLibrary.trigger("seek_start")},seeking:function(){_this.vgControllerLibrary.trigger("seeking")},seeked:function(){_this.vgControllerLibrary.trigger("seeked")},done:function(){_this.vgControllerLibrary.trigger("done")},muted:function(a){_this.cacheStorage.set_muted(a),_this.vgControllerLibrary.trigger("muted",a)},progress:function(a){var b=1*a.percent,c=1*a.position,d=1*a.duration;_this.cacheStorage.set_progress({percent:b,position:c,duration:d}),_this.vgControllerLibrary.trigger("progress",b,c,d)},speedchange:function(a){_this.cacheStorage.set_speed(1*a),_this.vgControllerLibrary.trigger("speedchange",1*a)},screenchange:function(a){_this.cacheStorage.get_fullscreen_element()?_this.setCustomElementFullscreen(_this.cacheStorage.get_fullscreen_element()):(_this.cacheStorage.set_screen(a),_this.vgControllerLibrary.trigger("screenchange",a))},volumechange:function(a){_this.cacheStorage.set_volume(1*a),_this.vgControllerLibrary.trigger("volumechange",1*a)},waiting:function(a){_this.vgControllerLibrary.trigger("waiting",1*a.time)},error:function(a){_this.vgControllerLibrary.trigger("error",a.code),_this.cacheStorage.set_error_detail(a.code,a.message,a.param)},close:function(){_this.vgControllerLibrary.trigger("close"),_this.cacheStorage.get_close_button_callback_fn()&&eval(_this.cacheStorage.get_close_button_callback_fn())},jumpstepchange:function(a){_this.cacheStorage.set_jumpstep(1*a),_this.vgControllerLibrary.trigger("jumpstepchange",1*a)},scalemodechange:function(a){_this.cacheStorage.set_scalemode(a),_this.vgControllerLibrary.trigger("scalemodechange",a)},topmostchange:function(a){_this.cacheStorage.set_topmost(a),_this.vgControllerLibrary.trigger("topmostchange",a)},videosettingchange:function(a){_this.cacheStorage.set_video(a),_this.vgControllerLibrary.trigger("videosettingchange",a)},html5_video_supported:function(a){_this.vgControllerLibrary.trigger("html5_video_supported",a)},playbackrateschange:function(a){_this.cacheStorage.set_playback_rates(a),_this.vgControllerLibrary.trigger("playbackrateschange",a)},repeat_stat_change:function(a){_this.cacheStorage.set_repeat_stat(a),_this.vgControllerLibrary.trigger("repeat_stat_change",a)},check_device_orientation:function(){_this.checkDeviceOrientation()},check_device_motion:function(){_this.checkDeviceMotion()},subtitle_load_done:function(){_this.vgControllerLibrary.trigger("subtitle_load_done")},subtitlevisibilitychange:function(a){_this.cacheStorage.set_subtitle_visibility(a),_this.vgControllerLibrary.trigger("subtitlevisibilitychange",a)},subtitlesubvisibilitychange:function(a){_this.cacheStorage.set_subtitle_visibility(a),_this.vgControllerLibrary.trigger("subtitle_sub_visibilitychange",a)},subtitle_sizechange:function(a){_this.cacheStorage.set_subtitle_font_size(parseInt(a)),_this.vgControllerLibrary.trigger("subtitle_sizechange",parseInt(a))},subtitle_sub_sizechange:function(a){_this.cacheStorage.set_subtitle_sub_font_size(parseInt(a)),_this.vgControllerLibrary.trigger("subtitle_sub_sizechange",parseInt(a))},subtitle_shadow_rect_change:function(a){_this.cacheStorage.set_subtitle_shadow_rect(a),_this.vgControllerLibrary.trigger("subtitle_shadow_rect_change",a)},subtitle_sub_shadow_rect_change:function(a){_this.cacheStorage.set_subtitle_sub_shadow_rect(a),_this.vgControllerLibrary.trigger("subtitle_sub_shadow_rect_change",a)},call_intent_uri:function(a){_this.callIntentURI(a),_this.vgControllerLibrary.trigger("call_intent_uri",a)},user_active_changed:function(a){_this.vgControllerLibrary.trigger("user_active_changed",a)},custom_skin_changed:function(a){_this.cacheStorage.set_custom_skin(a),_this.vgControllerLibrary.trigger("custom_skin_changed",a)},custom_skin_v3_changed:function(a){_this.cacheStorage.set_custom_skin(a,"v3")},fetch_custom_skin:function(a){_this.cacheStorage.set_custom_skin(a)},fetch_player_id:function(a){_this.cacheStorage.set_player_id(a)},fetch_hardware_id:function(a){_this.cacheStorage.set_hardware_id(a)},fetch_video_info:function(a){_this.cacheStorage.set_video_info(a)},fetch_get_lms_data:function(a){_this.cacheStorage.get_lms_data_callback_fn()(a)},fetch_get_bookmark_count:function(a){var b={all:a.index+a.user,index:a.index,user:a.user};_this.cacheStorage.get_bookmark_count_callback_fn()(b)},fetch_hls_frag_data:function(a){_this.cacheStorage.set_hls_frag_data(a),_this.vgControllerLibrary.trigger("hlsfragchange",a)},fetch_hls_manifest_loaded:function(a){_this.vgControllerLibrary.trigger("hls_manifest_loaded",a),a.levels.sort(function(a,b){return a.bitrate-b.bitrate});for(var b=[],c=0;c<a.levels.length;c++){var d=a.levels[c];b.push({bitrate:d.bitrate,width:d.width,height:d.height})}_this.cacheStorage.set_bitrate_data(b),_this.vgControllerLibrary.trigger("bitrate_data_loaded",b)},fetch_dash_manifest_loaded:function(a){_this.vgControllerLibrary.trigger("dash_manifest_loaded",a);var b=a.Period.AdaptationSet[0].Representation;b.sort(function(a,b){return a.bitrate-b.bitrate});for(var c=[],d=0;d<b.length;d++){var e=b[d];c.push({bitrate:Math.round(e.bandwidth/1e3),width:e.width,height:e.height})}_this.cacheStorage.set_bitrate_data(c),_this.vgControllerLibrary.trigger("bitrate_data_loaded",c)},fetch_main_media_subtitles:function(a){_this.cacheStorage.set_main_media_subtitles(JSON.parse(a))},fetch_main_media_subtitles_sub:function(a){_this.cacheStorage.set_main_media_subtitles_sub(JSON.parse(a))},fetch_get_chat_connect_address:function(a){_this.cacheStorage.set_chat_connect_address(a)},fetch_chat_info:function(a){_this.cacheStorage.set_chat_initconfig(a)},next_episode_change:function(a){_this.cacheStorage.set_next_episode_auto(a),_this.vgControllerLibrary.trigger("next_episode_change",a)},next_episode_auto_change:function(a){_this.cacheStorage.set_next_episode_auto(a),_this.vgControllerLibrary.trigger("next_episode_auto_change",a)},fetch_get_next_episode_auto:function(a){_this.cacheStorage.set_next_episode_auto(a)},next_episode_requested:function(a){_this.vgControllerLibrary.trigger("next_episode_requested",a)},bookmark_change:function(a){_this.vgControllerLibrary.trigger("bookmark_change",a)},quality_levels_loaded:function(a){_this.cacheStorage.set_bitrate_data(a),_this.vgControllerLibrary.trigger("bitrate_data_loaded",a)},picture_in_picture_entered:function(a){_this.vgControllerLibrary.trigger("picture_in_picture_entered")},picture_in_picture_leaved:function(a){_this.vgControllerLibrary.trigger("picture_in_picture_leaved")}}},VgControllerClient}),window.VgControllerClient=Modules.get("com.kollus.vgcontroller","VgControllerClient"),window.Kollus=window.Kollus||{},window.Kollus.VideogatewayController=Modules.get("com.kollus.vgcontroller","VgControllerClient");